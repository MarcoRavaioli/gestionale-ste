<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Nuovo Cantiere</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="chiudi()">Annulla</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <div class="section-box">
    <div class="header-toggle">
      <h3><ion-icon name="person-add-outline"></ion-icon> Committente</h3>
    </div>

    <ion-item lines="none" class="ion-margin-bottom">
      <ion-toggle mode="ios" [(ngModel)]="usaClienteGenerico" color="medium">
        Cantiere Interno (Nessun Cliente)
      </ion-toggle>
    </ion-item>

    <div *ngIf="!usaClienteGenerico" class="fade-in">
      <app-generic-selector 
        label="Cerca e seleziona Cliente..."
        type="cliente"
        [items]="listaClienti"
        [(selectedId)]="clienteSelezionatoId">
      </app-generic-selector>

      <ion-button expand="block" fill="outline" class="ion-margin-top" (click)="creaNuovoClienteAlVolo()">
        <ion-icon name="add" slot="start"></ion-icon>
        Crea Nuovo Cliente
      </ion-button>
    </div>
  </div>

  <div class="section-box ion-margin-top">
    <h3><ion-icon name="location-outline"></ion-icon> Indirizzo Cantiere</h3>
    
    <div class="form-grid">
      <ion-input label="Via / Piazza *" label-placement="floating" fill="outline" [(ngModel)]="indirizzo.via"></ion-input>
      
      <div style="display: flex; gap: 10px;">
        <ion-input label="Civico *" label-placement="floating" fill="outline" style="flex: 1" [(ngModel)]="indirizzo.civico"></ion-input>
        <ion-input label="CAP" type="number" label-placement="floating" fill="outline" style="flex: 1" [(ngModel)]="indirizzo.cap"></ion-input>
      </div>

      <ion-input label="CittÃ  *" label-placement="floating" fill=\"outline" [(ngModel)]="indirizzo.citta"></ion-input>
      <ion-input label="Provincia" label-placement="floating" fill="outline" [(ngModel)]="indirizzo.provincia"></ion-input>
    </div>
  </div>

  <ion-button expand="block" class="ion-margin-top" size="large" (click)="salva()" [disabled]="!isValid()">
    CREA CANTIERE
  </ion-button>
</ion-content>