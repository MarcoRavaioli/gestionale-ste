/* --- GESTIONE TEMA --- */
:host {
  --page-bg: #f4f5f8;
  --card-bg: #ffffff;
  --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  --text-color: var(--ion-color-dark);
  --text-secondary: var(--ion-color-medium);
  --border-color: #e0e0e0;
}

@media (prefers-color-scheme: dark) {
  :host {
    --page-bg: #000000;
    --card-bg: #1c1c1e;
    --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
    --text-color: #ffffff;
    --text-secondary: #98989d;
    --border-color: #2c2c2e;
  }
}

ion-content { --background: var(--page-bg); }

.header-content {
  display: flex; justify-content: center; align-items: center; width: 100%;
}

/* --- NUOVO CONTROLS CARD (Periodo e Costo Pasto) --- */
.controls-card {
  background: var(--card-bg);
  padding: 15px;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);

  .control-row {
    display: flex; justify-content: space-between; align-items: flex-end;
    margin-bottom: 15px;
  }

  .control-group {
    display: flex; flex-direction: column; gap: 5px;
    label { font-size: 0.75rem; color: var(--text-secondary); font-weight: 600; text-transform: uppercase; }
    
    &.right { align-items: flex-end; }
  }

  .value-badge {
    background: rgba(var(--ion-color-primary-rgb), 0.1);
    color: var(--ion-color-primary);
    padding: 8px 12px; border-radius: 8px;
    font-weight: 700; font-size: 1rem;
    display: flex; align-items: center; gap: 8px;
    cursor: pointer;
    ion-icon { font-size: 1rem; }
  }

  .total-stripe {
    background: var(--page-bg);
    padding: 10px; border-radius: 8px;
    display: flex; justify-content: space-between; align-items: center;
    span { font-size: 0.8rem; color: var(--text-secondary); font-weight: 600; }
    strong { font-size: 1.2rem; color: var(--ion-color-success); }
  }
}

/* --- NUOVA EMPLOYEE CARD (Dettagliata) --- */
.employee-card {
  background: var(--card-bg); margin: 0 15px 20px 15px;
  border-radius: 20px; box-shadow: var(--card-shadow);
  padding: 20px;
  
  .card-top {
    display: flex; align-items: center; gap: 15px; margin-bottom: 20px;
    .avatar-circle {
      width: 48px; height: 48px; background: var(--ion-color-light);
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 1.2rem; color: var(--ion-color-dark);
    }
    h2 { margin: 0; font-size: 1.1rem; font-weight: 700; color: var(--text-color); }
  }

  /* KPI GRID */
  .kpi-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 25px;
    .kpi-box {
      background: rgba(var(--ion-color-light-rgb), 0.5);
      border-radius: 12px; padding: 10px;
      display: flex; flex-direction: column; align-items: center; text-align: center;
      ion-icon { font-size: 1.4rem; margin-bottom: 5px; }
      
      &.purple { color: var(--ion-color-tertiary); background: rgba(var(--ion-color-tertiary-rgb), 0.1); }
      &.blue { color: var(--ion-color-secondary); background: rgba(var(--ion-color-secondary-rgb), 0.1); }
      &.orange { color: var(--ion-color-warning); background: rgba(var(--ion-color-warning-rgb), 0.1); }

      .kpi-val {
        strong { display: block; font-size: 1.1rem; color: var(--text-color); line-height: 1; }
        small { font-size: 0.65rem; text-transform: uppercase; color: var(--text-secondary); font-weight: 600; margin-top: 4px; }
      }
    }
  }

  /* FINANCIAL SECTION */
  .financial-section {
    background: var(--page-bg);
    border-radius: 12px; padding: 15px;
    
    .fin-row {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 12px;
      &:last-child { margin-bottom: 0; }
    }

    .fin-input-grp, .fin-static-grp {
      display: flex; align-items: center; gap: 10px;
      ion-icon { font-size: 1.2rem; }
      
      .input-wrapper {
        display: flex; align-items: center;
        background: var(--card-bg); border: 1px solid var(--border-color);
        border-radius: 6px; padding: 0 8px; height: 32px; width: 100px;
        
        .currency { font-size: 0.75rem; color: var(--text-secondary); margin-right: 5px; }
        input { 
          border: none; background: transparent; width: 100%; 
          font-weight: 700; color: var(--text-color); outline: none; font-size: 0.9rem;
        }
      }
      
      span { font-size: 0.85rem; font-weight: 600; color: var(--text-color); }
    }

    .fin-calc {
      text-align: right;
      small { display: block; font-size: 0.7rem; color: var(--text-secondary); }
      .subtotal { font-weight: 600; font-size: 0.95rem; color: var(--text-color); }
    }

    .divider { height: 1px; background: var(--border-color); margin: 10px 0; }

    .fin-total-row {
      display: flex; justify-content: space-between; align-items: center;
      span { font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
      .grand-total { font-size: 1.3rem; color: var(--ion-color-success); }
    }
  }
}

/* STILI COLLABORATORE (Invariati e riutilizzati) */
.my-stats {
  display: flex; gap: 10px; margin-bottom: 30px;
  .stat-card {
    flex: 1; background: var(--card-bg); padding: 12px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    box-shadow: var(--card-shadow); flex-direction: column; text-align: center;
    ion-icon { font-size: 1.8rem; }
    .txt {
      span { font-size: 0.65rem; color: var(--text-secondary); font-weight: 600; text-transform: uppercase;}
      strong { font-size: 1.2rem; color: var(--text-color); display: block;}
    }
    &.purple ion-icon { color: var(--ion-color-tertiary); }
    &.blue ion-icon { color: var(--ion-color-primary); }
    &.orange ion-icon { color: var(--ion-color-warning); }
  }
}

.input-card {
  background: var(--card-bg); color: var(--text-color);
  border-radius: 20px; box-shadow: var(--card-shadow); margin: 10px 0 25px 0;
  ion-card-title { color: var(--ion-color-primary); font-weight: 800; }
  ion-card-subtitle { color: var(--text-secondary); letter-spacing: 0.5px; }
  .date-row { text-align: center; margin-bottom: 20px; }
  .form-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;
    .toggle-box {
      border: 1px solid var(--border-color); border-radius: 8px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 5px; background: rgba(var(--ion-color-light-rgb), 0.3);
      ion-label { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 5px; font-weight: 600;}
    }
  }
  .action-buttons {
    display: flex; gap: 10px; margin-top: 20px;
    ion-button { flex: 1; font-weight: 700; --border-radius: 10px; }
  }
}

.history-title {
  font-size: 1.1rem; font-weight: 800; color: var(--text-color); margin-bottom: 15px; margin-left: 5px;
}

.history-list {
  padding-bottom: 40px;
  .history-item {
    background: var(--card-bg); padding: 12px; border-radius: 16px; margin-bottom: 12px;
    display: flex; align-items: center; gap: 15px; box-shadow: var(--card-shadow);
    position: relative; overflow: hidden;
    border-left: 4px solid var(--ion-color-light); 
    &.has-food { border-left-color: var(--ion-color-warning); }
    .date-box {
      display: flex; flex-direction: column; align-items: center;
      background: rgba(var(--ion-color-light-rgb), 0.5); 
      padding: 6px 10px; border-radius: 10px; min-width: 50px;
      .day { font-weight: 800; font-size: 1.2rem; line-height: 1; color: var(--text-color); }
      .mth { font-size: 0.65rem; text-transform: uppercase; font-weight: 700; color: var(--text-secondary); }
    }
    .info-box {
      flex: 1; display: flex; flex-direction: column;
      .hours { font-weight: 700; font-size: 1.05rem; color: var(--text-color); }
      .desc { font-size: 0.85rem; color: var(--text-secondary); font-style: italic; margin-top: 2px;}
    }
    .actions {
      display: flex; gap: 5px;
      .icon-badge {
        width: 32px; height: 32px; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        &.food { background: rgba(var(--ion-color-warning-rgb), 0.1); color: var(--ion-color-warning); }
        &.edit { background: rgba(var(--ion-color-primary-rgb), 0.1); color: var(--ion-color-primary); cursor: pointer;}
      }
    }
  }
}